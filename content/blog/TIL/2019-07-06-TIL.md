---
title: 2019-07-06 TIL
date: 2019-07-06 17:16:23
category: TIL
---

2019-07-06

# JavaScript Array의 forEach() vs Map()

회사에서 기존에 작성된 코드를 보던 중, iteration 목적으로 `Array.prototype.map()`메서드를 사용하는 것을 보고 혹시 성능상의 이유가 있는지 조금 궁금해져 찾아봄.

[이 글](https://codeburst.io/javascript-map-vs-foreach-f38111822c0f)의 결론

1. `forEach`와 `map`은 서로 상호 호환 가능하다.
2. `map`은 메모리를 할당해 콜백의 return값을 저장한다. 반면 `forEach`는 return을 무시하고 항상 `undefined`를 리턴한다.
3. `map`은 새 어레이를 리턴하는 반면, `forEach`는 콜백 함수로 하여금 현재 어레이를 변형(mutate)할 수 있도록 한다.

흔히 알려진 대로다.



그런데 [jsben.ch](http://jsben.ch/)에서 빈 어레이에 오브젝트를 push하는 동일한 코드를 `forEach`와 `map`을 이용해 1만 회 iteration 해보니 `forEach`가 약 10% 더 빨랐다.

jsperf에서 수행한 본문의 테스트를 jsbench에서 돌리면 역시 forEach가 더 빨랐다. 약 5%.

이렇게 테스팅 환경에 따라 결과가 다를 수 있으며, 유의미한 차이는 없으니 좀 더 의미있는 차이에 집중하는 것이 좋겠다.




